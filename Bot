import asyncio
import os
from threading import Thread
os.environ.get('PORT', 0000)
import discord
from discord.ext import commands
from flask import Flask

# Configuration du serveur Flask
app = Flask('')

@app.route('/')
def home():
    return "Bot actif !"

def run():
    app.run(host='0.0.0.0', port=8080)

def keep_alive():
    t = Thread(target=run)
    t.start()

# Activation du serveur web
keep_alive()

# Configuration du bot Discord
intents = discord.Intents.default()
intents.message_content = True
bot = commands.Bot(command_prefix='', intents=intents)

@bot.event
async def on_ready():
    print(f'Bot connecté en tant que {bot.user}')

@bot.event
async def on_message(message):
    # Ignore les messages du bot
    if message.author == bot.user:
        return

    # Déclencheur personnalisé
    if 'sd' in message.content.lower():
        await asyncio.sleep(480)  # 8 minutes = 480 secondes
        await message.channel.send(f"{message.author.mention} TU PEUX DROP ! ! !")

# Lancement du bot avec le token stocké dans les variables d’environnement
token = os.environ['TOKEN_BOT_DISCORD']
bot.run(token)
